:root {
  --bg:#0d1524;
  --panel:#1f2d46;
  --accent:#e63946;
  --accent-glow:#ff5461;
  --text:#f1f5f9;
  --sub:#9fb3c8;
  --gold:#ffca3a;
  --green:#4caf50;
  --radius:12px;
  --font:'Segoe UI',system-ui,Arial,sans-serif;
}

* { box-sizing:border-box; }
body {
  margin:0;
  font-family:var(--font);
  background:linear-gradient(125deg,#09101d 0%, #152a44 60%, #203957 100%);
  color:var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
header {
  padding:1.25rem 1rem 0.5rem;
  text-align:center;
}
header h1 { margin:0 0 .4rem; font-size:clamp(1.8rem,4vw,2.8rem); }
header p { margin:.25rem 0 1rem; color:var(--sub); }

.calendar-grid {
  width:min(1100px,95%);
  margin:1rem auto 2.5rem;
  display:grid;
  gap:.85rem;
  grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
}

.door {
  position:relative;
  background:linear-gradient(145deg,#223a58,#16273b);
  border:2px solid #2f4e73;
  border-radius:var(--radius);
  padding:.5rem .5rem .75rem;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:110px;
  font-weight:600;
  letter-spacing:.5px;
  color:#fff;
  transition:.25s;
  overflow:hidden;
}
.door.locked { filter:grayscale(.8); opacity:.6; cursor:not-allowed; }
.door:hover:not(.locked) {
  transform:translateY(-4px);
  box-shadow:0 10px 18px -6px rgba(0,0,0,.5),0 0 0 3px #335d85 inset;
}

.door-number {
  font-size:1.4rem;
  margin-bottom:.25rem;
  text-shadow:0 2px 4px rgba(0,0,0,.6);
}
.door-title {
  font-size:.65rem;
  text-align:center;
  line-height:1.1;
  color:var(--gold);
  font-weight:500;
  opacity:.9;
}

footer {
  text-align:center;
  margin-top:auto;
  padding:1rem .5rem 1.5rem;
  color:var(--sub);
}

.modal {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(4px);
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:2.5rem 1rem 1.5rem;
  overflow-y:auto;
  z-index:50;
}
.hidden { display:none; }
.modal-content {
  background:linear-gradient(160deg,#1c314e,#142335 60%);
  width:min(900px,100%);
  border:2px solid #2e4c70;
  border-radius:18px;
  padding:1.2rem 1.2rem 2rem;
  position:relative;
  box-shadow:0 20px 40px -18px rgba(0,0,0,.65);
  animation:pop .4s ease;
}

@keyframes pop {
  from { transform:translateY(25px) scale(.95); opacity:0; }
  to { transform:translateY(0) scale(1); opacity:1; }
}

.close-btn {
  position:absolute;
  top:.6rem; right:.6rem;
  background:#1d2838;
  color:#fff;
  border:1px solid #395b7c;
  width:38px; height:38px;
  border-radius:50%;
  font-size:1.05rem;
  cursor:pointer;
  transition:.25s;
}
.close-btn:hover {
  background:var(--accent);
  border-color:var(--accent);
  box-shadow:0 0 10px -2px var(--accent-glow);
}

.secondary-btn {
  background:#224363;
  color:#fff;
  border:1px solid #416b90;
  padding:.6rem 1.1rem;
  font-size:.9rem;
  border-radius:8px;
  cursor:pointer;
  transition:.25s;
  letter-spacing:.5px;
}
.secondary-btn:hover {
  background:#2d5f88;
}

h2#gameTitle {
  margin:0 0 .65rem;
  font-size:1.5rem;
  letter-spacing:.5px;
}

.status-bar {
  display:flex;
  gap:1rem;
  flex-wrap:wrap;
  font-size:.85rem;
  background:#1d2e44;
  padding:.5rem .75rem;
  border-radius:10px;
  margin-bottom:.75rem;
  border:1px solid #2d4e74;
}

.status-item {
  background:#223850;
  padding:.35rem .6rem;
  border-radius:6px;
  border:1px solid #335979;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:.4rem;
}

.game-root {
  min-height:380px;
  background:#142536;
  border:1px solid #294661;
  border-radius:14px;
  position:relative;
  overflow:hidden;
  padding:.75rem;
  display:flex;
  align-items:stretch;
  justify-content:center;
  flex-direction:column;
}

.flex-center { display:flex; align-items:center; justify-content:center; }

.board-memory {
  display:grid;
  gap:.5rem;
  justify-content:center;
  margin:auto;
  width:100%;
  max-width:520px;
  grid-template-columns:repeat(auto-fill,minmax(70px,1fr));
}

.card {
  position:relative;
  aspect-ratio:1/1;
  background:#1f3a55;
  border:2px solid #33597e;
  border-radius:12px;
  cursor:pointer;
  font-size:2rem;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:.35s;
  user-select:none;
}
.card.revealed {
  background:#284d72;
  transform:scale(1.04);
}
.card.matched {
  background:var(--green);
  border-color:#56d276;
  color:#fff;
  animation:glow .6s ease;
}

@keyframes glow {
  0% { box-shadow:0 0 0 0 rgba(255,255,255,.6); }
  70% { box-shadow:0 0 16px 6px rgba(255,255,255,.15); }
  100% { box-shadow:0 0 0 0 rgba(255,255,255,.0); }
}

.snow-area {
  position:relative;
  flex:1;
  overflow:hidden;
}

.snowflake {
  position:absolute;
  top:-40px;
  font-size:clamp(16px,2.2vw,34px);
  animation:fall linear forwards;
  cursor:pointer;
  user-select:none;
}

@keyframes fall {
  to { transform:translateY(120vh) rotate(360deg); opacity:0; }
}

.catch-area {
  position:relative;
  flex:1;
  overflow:hidden;
  background:radial-gradient(circle at 50% 20%, #1f3d5a, #142536);
}

.player {
  position:absolute;
  bottom:18px;
  width:70px;
  height:70px;
  background:#ffca3a;
  border:3px solid #e0a800;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2rem;
  transition:.08s;
  box-shadow:0 4px 10px -4px rgba(0,0,0,.6);
}

.falling {
  position:absolute;
  top:-50px;
  width:46px;
  height:46px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.4rem;
  animation:drop linear forwards;
  box-shadow:0 4px 10px -4px rgba(0,0,0,.6);
}

.falling.present {
  background:#3da35d;
  border:3px solid #2d7d45;
}
.falling.coal {
  background:#3a3a3a;
  border:3px solid #262626;
}

@keyframes drop {
  to { transform:translateY(110vh) rotate(540deg); opacity:.25; }
}

.instructions {
  font-size:.8rem;
  color:var(--sub);
  text-align:center;
  margin-top:.5rem;
  line-height:1.3;
}

/* Scrollbar subtle */
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background:#0f1d2c; }
::-webkit-scrollbar-thumb { background:#1f3853; border-radius:8px; }
::-webkit-scrollbar-thumb:hover { background:#2d5379; }

/* Responsive */
@media (max-width:650px) {
  .modal-content { padding:1rem 1rem 1.5rem; }
  .board-memory { grid-template-columns:repeat(auto-fill,minmax(62px,1fr)); }
  .player { width:60px; height:60px; font-size:1.6rem; }
  .falling { width:40px; height:40px; }
}